
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="layout">

<body>
<div class="admin-content-body" layout:fragment="content"  id="container">
    <div id="main" style="width: 100%;height:93%;">
        <div style="padding: 15px 25px ">
            <el-breadcrumb separator="/">
                <el-breadcrumb-item >首页</el-breadcrumb-item>
                <el-breadcrumb-item>配置管理</el-breadcrumb-item>
                <el-breadcrumb-item>传感器</el-breadcrumb-item>
                <el-breadcrumb-item>基础信息维护</el-breadcrumb-item>
            </el-breadcrumb>
        </div>
        <div class="col-lg-12 col-md-12 table-wrap" >


            <el-table  :data="tbData.content"   v-loading.body="listLoading" border stripe highlight-current-row height="450"   style="width: 100%">
                <el-table-column   type="index" width="100"></el-table-column>
                <el-table-column   prop="sid"  label="唯一编码"  width="150"> </el-table-column>
                <el-table-column   prop="pole"  label="安装位置"  width="200"> </el-table-column>
                <el-table-column prop="station"  label="基站" width="120">  </el-table-column>
                <el-table-column  prop="sidAddr"  label="传感器码"  width="120">  </el-table-column>
                <el-table-column  prop="type"   label="类型"  width="180">
                    <template scope="scope">
                        <select v-model="scope.row.type" disabled="disabled">
                            <option value="05">温度（摄氏度)</option>
                            <option value="11">雷击次数(次)</option>
                            <option value="1A">泄露电流（微安培）</option>
                            <option value="40">湿度(相对湿度)</option>
                        </select>

                    </template>
                </el-table-column>
                <el-table-column  prop="unit"  label="单位" width="120"> </el-table-column>
            </el-table>
            <div v-show="!listLoading" class="col-lg-12 col-md-12 block " >

                <el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange"
                               :page-sizes="[10,20,30,50]" style="width: 100%" :page-size="listQuery.size" layout="total, sizes, prev, pager, next, jumper" :total="tbData.totalElements">
                </el-pagination>
            </div>
        </div>

    </div>
</div>
<th:block layout:fragment="script">
    <script type="text/javascript"  th:inline="javascript">
        var v=new Vue({
            el:"#main",
            mounted:function(){
                this.listSensors();
            },

            methods:{
                handleSizeChange:function(val) {
                    console.log("size change")
                    this.listQuery.size = val;
                    this.listSensors();
                },
                handleCurrentChange:function(val) {
                    console.log("current change")
                    this.listQuery.page = val-1;
                    this.listSensors();
                },
                listSensors:function( ){

                    var that=this;
                    that.listLoading=true;
                    axios.get("/bileiqi/sensor/all",{params:that.listQuery}).then(function(resp){
                            console.log(resp.data)
                            that.tbData=resp.data;
                            that.listLoading=false;
                    })
                }
            },

            data:function(){
                return{
                    listQuery: {
                        page: 0,
                        size: 10,
                        importance: undefined,
                        title: undefined,
                        type: undefined
                    },
                    listLoading:false,
                    tbData:{}

                }
            }
        })
    </script>
    <!--<script type="text/javascript" th:src="@{/assets/js/chart/humidityk.js}" src="../../static/assets/js/chart/humidityk.js"></script>-->

</th:block>
</body>
</html>